@model App.Model.Core.Denuncia

@Html.Action("Header", "Workflow", new { Model.WorkflowId })

<div class="container">
    @Html.Partial("_Message")

    <div class="row">
        <div class="col s12 m10 l8">
            @using (Html.BeginForm("Edit", "DenunciaIntegridad", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                @Html.HiddenFor(m => m.ProcesoId)
                @Html.HiddenFor(m => m.WorkflowId)
                @Html.HiddenFor(m => m.DenunciaIntegridadId)
                @Html.HiddenFor(m=>Model.FechaHecho)
                        
                <div class="card">
                    <div class="card-content">
                        <div class="row">
                            <div class="input-field col s12 m6 l6">
                                <strong>
                                    @Html.DisplayNameFor(m=>m.Fecha)
                                </strong>
                                @Html.DisplayFor(m=>m.Fecha)
                            </div>
                            <div class="input-field col s12 m6 l6">
                                <strong>
                                    @Html.DisplayNameFor(m=>Model.DenunciaIntegridadId)
                                </strong>
                                @Html.DisplayFor(m=>Model.DenunciaIntegridadId)
                            </div>
                        </div>
                        <ul class="collapsible popout">
                            <li>
                                <div class="collapsible-header">
                                    <i class="material-icons">assignment</i>
                                    <span style="font-weight: bold">Información Denuncia:</span>
                                </div>
                                <div class="collapsible-body">
                                    <div class="row">
                                        <strong>Tipo Atentado</strong>
                                        <div class="row">
                                            <div class="input-field col s4 m4 l4">
                                                <label>
                                                    @Html.CheckBoxFor(m => m.MaltratoLaboral)
                                                    <span>@Html.LabelFor(m => m.MaltratoLaboral)</span>
                                                </label>
                                            </div>
                                            <div class="input-field col s4 m4 l4">
                                                <label>
                                                    @Html.CheckBoxFor(m => m.AcosoLaboral)
                                                    <span>@Html.LabelFor(m => m.AcosoLaboral)</span>
                                                </label>
                                            </div>
                                            <div class="input-field col s4 m4 l4">
                                                <label>
                                                    @Html.CheckBoxFor(m => m.AcosoSexual)
                                                    <span>@Html.LabelFor(m => m.AcosoSexual)</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="input-field col s12 m10 l10">
                                                <label>
                                                    @Html.CheckBoxFor(m => m.DelitoFinanciero)
                                                    <span>@Html.LabelFor(m => m.DelitoFinanciero)</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="input-field col s12 m10 l10">
                                                <label>
                                                    @Html.CheckBoxFor(m => m.FaltaProbidad)
                                                    <span>@Html.LabelFor(m => m.FaltaProbidad)</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="divider"></div>
                                    <br />
                                    <div class="row">
                                        <strong>@Html.DisplayNameFor(m => m.NivelJerarquico)</strong>
                                        <br />
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m => m.NivelJerarquico, "Nivel Superior", new { @id = "nivelSuperior" })
                                                <span>Nivel Superior</span>
                                            </label>
                                        </div>
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m => m.NivelJerarquico, "Igual Nivel Jerarquico", new { @id = "nivelIgual" })
                                                <span>Igual Nivel Jerarquico</span>
                                            </label>
                                        </div>
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m => m.NivelJerarquico, "Nivel Inferior", new { @id = "nivelInferior" })
                                                <span>Nivel Inferior</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="divider"></div>
                                    <br />
                                    <div class="row">
                                        <strong>@Html.DisplayNameFor(m => m.EsJefatura)</strong>
                                        <br />
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m=>m.EsJefatura, true)
                                                <span>SI</span>
                                            </label>
                                        </div>
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m=>m.EsJefatura,false)
                                                <span>NO</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="divider"></div>
                                    <br />
                                    <div class="row">
                                        <strong>@Html.DisplayNameFor(m => m.TrabajaDirecto)</strong>
                                        <br />
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m=>m.TrabajaDirecto,true)
                                                <span>SI</span>
                                            </label>
                                        </div>
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m=>m.TrabajaDirecto,false)
                                                <span>NO</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="divider"></div>
                                    <br />
                                    <div class="row">
                                        <strong>@Html.DisplayNameFor(m => m.EsDeConocimiento)</strong>
                                        <br />
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m=>m.EsDeConocimiento,true)
                                                <span>SI</span>
                                            </label>
                                        </div>
                                        <div class="col s4">
                                            <label>
                                                @Html.RadioButtonFor(m=>m.EsDeConocimiento,false)
                                                <span>NO</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </li>                            
                            <li>
                                <div class="collapsible-header" hidden>
                                    <i class="material-icons">person</i>
                                    <span style="font-weight: bold">Datos Personales de la Victima: </span>
                                </div>
                                <div class="collapsible-body">
                                    <div class="row">
                                        <div class="input-field col s12">
                                            <strong>@Html.DisplayNameFor(m => m.NombreVictima)</strong>
                                            @Html.TextBoxFor(m => m.NombreVictima)
                                        </div>
                                        <div>
                                            <div class="input-field col s8">
                                                <strong>@Html.DisplayNameFor(m => m.RutVictima)</strong>
                                                @Html.TextBoxFor(m => m.RutVictima)
                                            </div>
                                            <div class="input-field col s4">
                                                <strong>@Html.DisplayNameFor(m=>m.DvVictima)</strong>
                                                @Html.TextBoxFor(m=>m.DvVictima)
                                            </div>
                                        </div>
                                        <div class="input-field col s12">
                                            <strong>@Html.DisplayNameFor(m => m.CorreoVictima)</strong>
                                            @Html.TextBoxFor(m => m.CorreoVictima)
                                        </div>
                                        <div class="input-field col s12">
                                            <strong>@Html.DisplayNameFor(m => m.DescripcionUnidadVictima)</strong>
                                            @Html.TextBoxFor(m => m.DescripcionUnidadVictima)
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="collapsible-header">
                                    <i class="material-icons">person</i>
                                    <span style="font-weight: bold">Datos Personales del Denunciado/Victimario: </span>
                                </div>
                                <div class="collapsible-body">                                    
                                    <div>
                                        <div id="divDestino">
                                            <div class="row">
                                                <div class="input-field col s12 m12 l12">
                                                    <strong>@Html.DisplayNameFor(m => m.IdUnidadDenunciado)</strong>
                                                    @Html.DropDownListFor(m => Model.IdUnidadDenunciado, null, "Seleccione...", new { @class = "browser-default" })
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="input-field col s12 m12 l12">
                                                    <strong>@Html.DisplayNameFor(m => m.NombreDenunciado)</strong>
                                                    @Html.DropDownListFor(m => Model.NombreDenunciado, null, "Seleccione...", new { @class = "browser-default" })
                                                    @Html.ValidationMessageFor(m => Model.NombreDenunciado, "", new { @class = "red-text" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>                                    
                                </div>
                            </li>
                            <li>
                                <div class="collapsible-header">
                                    <i class="material-icons">chat</i>
                                    <span style="font-weight: bold">Narración Circunstanciada de los Hechos: </span>
                                </div>
                                <div class="collapsible-body">
                                    <div class="row">
                                        <div class="input-field col s6 m6 l6">
                                            <strong>@Html.DisplayNameFor(m => Model.FechaHecho)</strong>
                                            @Html.EditorFor(m=>Model.FechaHecho)
                                        </div>
                                        <div class="input-field col s12">
                                            <strong>@Html.DisplayNameFor(m => m.Hechos)</strong>
                                            @Html.TextAreaFor(m => m.Hechos, new { @style = "min-height: 400px; resize: none", @title = "Aquí va la descripción de los hechos" })
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <br />
                        <button class="waves-effect waves-light btn blue" type="submit">Guardar</button>
                    </div>
                    <br />
                </div>
            }
        </div>
        <div class="col s4">
            @Html.Action("Documents", "Workflow", new { Model.WorkflowId })
            @Html.Action("History", "Workflow", new { Model.WorkflowId })
        </div>
    </div>
    @Html.Action("Footer", "Workflow", new { Model.WorkflowId })
</div>

<script>
    $(document).ready(function () {
        var nivel = '@Model.NivelJerarquico';
        if (nivel == "Nivel Superior") {
            document.getElementById("nivelSuperior").attr("checked", "checked");
        } else if (nivel == "Nivel Inferior") {
            document.getElementById("nivelIgual").attr("checked", "checked");
        } else if (nivel = "Igual Nivel Jerarquico") {
            document.getElementById("nivelInferior").attr("checked", "checked");
        }
    });

    $("#ddlUnidad").change(function () {
        var Pl_UndCod = $(this).val();
        $.getJSON("/Workflow/GetUserByUnidad", { Pl_UndCod: Pl_UndCod },
            function (classesData) {
                var select = $("#NombreDenunciado");
                select.empty();
                select.append($('<option/>', {
                    value: "",
                    text: "Seleccione..."
                }));
                $.each(classesData, function (index, itemData) {
                    select.append($('<option/>', {
                        value: itemData.Nombre,
                        text: itemData.Nombre
                    }));
                });
            });
    });

    $("#IdUnidadDenunciado").change(function () {
        var Pl_UndCod = $(this).val();
        $.getJSON("/Workflow/GetUserByUnidad", { Pl_UndCod: Pl_UndCod },
            function (classesData) {
                var select = $("#NombreDenunciado");
                select.empty();
                select.append($('<option/>', {
                    value: "",
                    text: "Seleccione..."
                }));
                $.each(classesData, function (index, itemData) {
                    select.append($('<option/>', {
                        value: itemData.Nombre,
                        text: itemData.Nombre
                    }));
                });
            });
    });

    $(document).ready(function () {
        $('input[type="hidden"]').each(function (index, element) {
            $(element).appendTo($(element).parent());
        });
    });

    $(document).ready(function () {
        $('.collapsible').collapsible();
        $('select').formSelect();
    });

</script>

<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<style TYPE="text/css">
    strong {
        font-weight: bolder;
    }
</style>
