@model App.Model.SIAC.SIACSolicitud

@Html.Action("Header", "Workflow", new { Model.WorkflowId })

<div class="row">
    <div class="col s12 m6 l3">
        @using (Html.BeginForm("Edit", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.HiddenFor(q => Model.WorkflowId)
            @Html.HiddenFor(q => Model.ProcesoId)
            @Html.HiddenFor(q => Model.SIACSolicitudId)
            @Html.AntiForgeryToken()

               <div class="card">
                   <div class="card-content">
                       <span class="card-title">Solicitud SIAC</span>
                       <div class="section"></div>
                       <div class="row">
                           <div class="input-field col s12 m10 l10">
                               @Html.DropDownListFor(m => Model.SIACTipoSolicitudId, null, "Seleccione...")
                               @Html.LabelFor(m => Model.SIACTipoSolicitudId)
                               @Html.ValidationMessageFor(m => Model.SIACTipoSolicitudId, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.EditorFor(m => Model.RUT)
                               @Html.LabelFor(m => Model.RUT)
                               @Html.ValidationMessageFor(m => Model.RUT, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.EditorFor(m => Model.Nombres)
                               @Html.LabelFor(m => Model.Nombres)
                               @Html.ValidationMessageFor(m => Model.Nombres, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.EditorFor(m => Model.FechaNacimiento)
                               @Html.LabelFor(m => Model.FechaNacimiento)
                               @Html.ValidationMessageFor(m => Model.FechaNacimiento, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.EditorFor(m => Model.Telefono)
                               @Html.LabelFor(m => Model.Telefono)
                               @Html.ValidationMessageFor(m => Model.Telefono, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.EditorFor(m => Model.Direccion)
                               @Html.LabelFor(m => Model.Direccion)
                               @Html.ValidationMessageFor(m => Model.Direccion, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.EditorFor(m => Model.Email)
                               @Html.LabelFor(m => Model.Email)
                               @Html.ValidationMessageFor(m => Model.Email, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.DropDownListFor(m => Model.RegionId, null, "Seleccione...")
                               @Html.LabelFor(m => Model.RegionId)
                               @Html.ValidationMessageFor(m => Model.RegionId, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.DropDownListFor(m => Model.GeneroId, null, "Seleccione...")
                               @Html.LabelFor(m => Model.GeneroId)
                               @Html.ValidationMessageFor(m => Model.GeneroId, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.DropDownListFor(m => Model.SIACOcupacionId, null, "Seleccione...")
                               @Html.LabelFor(m => Model.SIACOcupacionId)
                               @Html.ValidationMessageFor(m => Model.SIACOcupacionId, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.DropDownListFor(m => Model.SIACTemaId, null, "Seleccione...")
                               @Html.LabelFor(m => Model.SIACTemaId)
                               @Html.ValidationMessageFor(m => Model.SIACTemaId, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.TextAreaFor(m => Model.Consulta, new { @class = "materialize-textarea" })
                               @Html.LabelFor(m => Model.Consulta)
                               @Html.ValidationMessageFor(m => Model.Consulta, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               @Html.TextAreaFor(m => Model.Respuesta, new { @class = "materialize-textarea" })
                               @Html.LabelFor(m => Model.Respuesta)
                               @Html.ValidationMessageFor(m => Model.Respuesta, "", new { @class = "red-text" })
                           </div>
                           <div class="input-field col s12 m10 l10">
                               <div class="file-field input-field">
                                   <div class="btn grey">
                                       <i class="material-icons">attach_file</i>
                                       @Html.TextBoxFor(m => Model.Archivo, null, new { @type = "file" })
                                   </div>
                                   <div class="file-path-wrapper">
                                       <input class="file-path validate" type="text" placeholder="Subir archivo...">
                                   </div>
                                   @Html.ValidationMessageFor(model => model.Archivo, "", new { @class = "red-text" })
                               </div>
                           </div>
                       </div>
                       <p>
                           <button class="waves-effect waves-light btn blue" type="submit">Guardar</button>
                       </p>
                   </div>
            </div>

        }
    </div>
    <div class="col s12 m6 l3">
        @Html.Action("Documents", "Workflow", new { Model.WorkflowId })
        @Html.Action("History", "Workflow", new { Model.WorkflowId })
    </div>
</div>

@Html.Action("Footer", "Workflow", new { Model.WorkflowId })

<script type="text/javascript">
    $(document).ready(function () {
        $('.datepicker').datepicker();
        $('select').formSelect();
        $('input:hidden').each(function (index, element) {
            $(element).appendTo($(element).parent());
        });

        $("#Solicitante").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Contrato/GetUser/",
                    data: { term: request.term },
                    type: "POST",
                    success: function (data) {
                        response($.map(data,
                            function (item) {
                                return { id: item.id, value: item.value };
                            }));
                    }
                });
            },

            select: function (event, ui) {
                $("#Solicitante").val(ui.item.id);
                $("#NombreSolicitante").val(ui.item.value);
                return false;
            }
        });
    });
</script>

<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/Scripts/jquery-ui.js"></script>
<link href="~/Content/jquery-ui-git.css" rel="stylesheet" />
