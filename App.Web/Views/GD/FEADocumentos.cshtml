@model IEnumerable<App.Model.Core.Documento>
@{
    Layout = null;
}

<div class="card">
    <div class="card-content">
        <span class="card-title">Documentos</span>
        @foreach (var item in Model)
        {
            <div class="section">
            </div>

            <h6>
                <i class="material-icons ">attach_file</i>
                <a href="@Url.Action("Download", "Documento", new { id = item.DocumentoId })">@item.FileName</a>
                @if (@item.Signed)
                {
                    <i class="material-icons medium secondary-content green-text">lock_outline</i>
                }
            </h6>
            <small class="grey-text ultra-small">Creado por @item.Email el @item.Fecha</small>

            if (@item.EsOficial)
            {
                <small><span class="new badge secondary-content red" data-badge-caption="">Oficial</span></small>
            }

            if (!string.IsNullOrWhiteSpace(item.Descripcion))
            {
                <div class="section">
                    @*@Html.LabelFor(m => item.Descripcion)<br />*@
                    @Html.DisplayFor(m => item.Descripcion)
                </div>
            }

            if (!string.IsNullOrWhiteSpace(item.Type) && item.Type.Contains("pdf") && item.File != null)
            {
                <embed src="@Url.Action("Show", "Documento", new { id = item.DocumentoId })" type="application/pdf" width="100%" height="200px"></embed>
            }

            if (@item.RequiereFirmaElectronica && item.AutorizadoParaFirma && !item.Signed)
            {
                <a class="waves-effect waves-light btn modal-trigger btn blue" href="#@string.Concat("modalFirmaDocumeto",@item.DocumentoId)">Firmar documento</a>
                <div id="@string.Concat("modalFirmaDocumeto",@item.DocumentoId)" class="modal">
                    <div class="modal-content">
                        <h4>Confirmación</h4>
                        <p>¿ Confirma la operación de firma electrónica del documento?</p>
                    </div>
                    <div class="modal-footer m1">
                        @using (Html.BeginForm("Sign", "Documento", new { id = item.DocumentoId }, FormMethod.Post, null))
                        {
                            @Html.AntiForgeryToken()
                            <button class="waves-effect waves-light btn blue" type="submit">Confirmar</button>
                            <a href="#!" class="modal-close waves-effect btn grey">Cancelar</a>
                        }
                    </div>
                </div>
            }
            <div class="section">
            </div>
        }
    </div>
</div>
